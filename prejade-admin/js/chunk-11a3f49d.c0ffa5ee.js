(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11a3f49d"],{3323:function(e,t,n){"use strict";n("a9e3");t["a"]={props:{id:{require:!0,type:Number},show:{require:!0,type:Boolean}},computed:{showVal:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}}}}},3659:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tree",{ref:"tree",attrs:{props:e.props,data:e.data,"default-expand-all":"","show-checkbox":e.showCheckbox,"check-strictly":!0,"node-key":"name"},on:{check:e.handleCheckChange,"node-click":e.handleNodeClick}})},i=[],o=(n("4160"),n("b0c0"),n("159b"),n("3323")),r=n("77a4"),l={name:"PrivilegeTree",mixins:[o["a"]],props:{value:{require:!0,type:[Array,Object],default:function(){return[]}},showCheckbox:{require:!1,type:Boolean,default:function(){return!0}}},data:function(){return{props:{label:"label",children:"children"},count:1,data:[]}},computed:{idVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["e"])().then((function(t){e.data=t.data,e.refreshChecked()}))},refreshChecked:function(){this.idVal&&this.idVal.length>0&&this.$refs.tree.setCheckedKeys(this.idVal)},handleCheckChange:function(e,t,n){this.idVal=this.getCheckedKeys()},handleNodeClick:function(e,t,n){this.$emit("node-click",e,t,n)},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},getCheckedKeys:function(){var e=this.$refs.tree.getCheckedNodes(!1,!0),t=[];return e.forEach((function(e){t.push(e.name)})),t}}},s=l,c=n("2877"),u=Object(c["a"])(s,a,i,!1,null,"5db822d0",null);t["a"]=u.exports},6724:function(e,t,n){"use strict";n("8d41");var a="@@wavesContext";function i(e,t){function n(n){var a=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var r=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(r.width,r.height)+"px",o.appendChild(l)),i.type){case"center":l.style.top=r.height/2-l.offsetHeight/2+"px",l.style.left=r.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(n.pageY-r.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(n.pageX-r.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=i.color,l.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}var o={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},r=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;t["a"]=o},"6b55":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.initData}},[e._v("查询")]),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.add}},[e._v("新增")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,border:"",fit:"","row-key":"id","default-expand-all":"","highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{label:"编号",align:"center",width:"130",prop:"id"}}),n("el-table-column",{attrs:{label:"名称",prop:"label"}}),n("el-table-column",{attrs:{label:"标识",prop:"name"}}),n("el-table-column",{attrs:{label:"类型",prop:"typeName"}}),n("el-table-column",{attrs:{"header-align":"center",align:"center",width:"185","class-name":"operate-group",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.edit(t.row.id)}}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.del(t.row.id)}}})]}}])})],1),n("Edit",{attrs:{id:e.editId,show:e.editShow},on:{"update:show":function(t){e.editShow=t},confirm:e.handleConfirm}})],1)},i=[],o=(n("ac1f"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"权限",visible:e.showVal,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showVal=t},closed:e.closed,open:e.handleOpen}},[n("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称",prop:"label"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.data.label,callback:function(t){e.$set(e.data,"label",t)},expression:"data.label"}})],1),n("el-form-item",{attrs:{label:"标识",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入标识"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),n("el-form-item",{attrs:{label:"父权限",prop:"parentName"}},[n("permission-input",{ref:"permissionInput",model:{value:e.data.parentName,callback:function(t){e.$set(e.data,"parentName",t)},expression:"data.parentName"}})],1),n("el-form-item",{attrs:{label:"权限类型",prop:"type"}},[n("el-select",{model:{value:e.data.type,callback:function(t){e.$set(e.data,"type",t)},expression:"data.type"}},[n("el-option",{attrs:{label:"菜单",value:"MENU"}}),n("el-option",{attrs:{label:"权限",value:"PERMISSION"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),n("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)}),r=[],l=n("77a4"),s=n("3323"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom",trigger:"focus",width:"200"},on:{show:e.handleShow},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[n("div",[n("permission-tree",{ref:"tree",attrs:{"show-checkbox":e.showCheckbox},on:{"node-click":e.nodeClick}})],1),n("el-input",{attrs:{slot:"reference",readonly:!0},slot:"reference",model:{value:e.labelVal,callback:function(t){e.labelVal=t},expression:"labelVal"}})],1)},u=[],d=(n("b0c0"),n("a9e3"),n("3659")),h={name:"PermissionInput",components:{PermissionTree:d["a"]},props:{value:{default:null,require:!0,type:[Number,String,Array]},showCheckbox:{require:!1,type:Boolean,default:function(){return!1}}},data:function(){return{object:{},popoverShow:!1}},computed:{labelVal:{get:function(){return this.object.label}},nameVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{nodeClick:function(e){this.object=e,e&&(this.nameVal=this.object.name),this.popoverShow=!1},handleShow:function(){this.$refs.tree.initData()},setValue:function(e){var t=this;e?Object(l["b"])(e).then((function(e){t.object=e.data,e&&(t.nameVal=t.object.name)})):this.object={}}}},p=h,m=n("2877"),f=Object(m["a"])(p,c,u,!1,null,"0d9f929a",null),b=f.exports,g={name:"Edit",components:{PermissionInput:b},mixins:[s["a"]],data:function(){return{loading:!1,data:{name:null,label:null,parentName:null,type:null},rules:{label:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:20,message:"长度在2-20个字符",trigger:"blur"}],name:[{required:!0,message:"请输入标识",trigger:"blur"},{min:2,max:50,message:"长度在2-50个字符",trigger:"blur"}],type:[{required:!0,message:"请选择权限类型",trigger:"change"}]}}},computed:{submitData:{get:function(){var e={};return Object.assign(e,this.data),e}}},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0,e.id?Object(l["f"])({id:e.id,data:e.submitData}).then((function(){e.loading=!1,e.$message.success("提交成功"),e.showVal=!1,e.reset(),e.confirm(e.id)})):Object(l["d"])({data:e.submitData}).then((function(t){e.loading=!1,e.$message.success("提交成功"),e.showVal=!1,e.reset(),e.confirm(t.data)}))}))},confirm:function(e){this.$emit("confirm",e)},init:function(e){var t=this;this.loading=!0,Object(l["c"])(e).then((function(e){t.loading=!1,t.data=e.data,t.data.parentName&&t.setParentVal(t.data.parentName)}))},setParentVal:function(e){this.$refs.permissionInput.setValue(e)},cancel:function(){this.showVal=!1},reset:function(){this.$refs.form.resetFields()},closed:function(){this.setParentVal(null)},handleOpen:function(){this.id&&this.init(this.id)}}},v=g,w=Object(m["a"])(v,o,r,!1,null,null,null),y=w.exports,k=n("6724"),x={name:"List",components:{Edit:y},directives:{waves:k["a"]},data:function(){return{editShow:!1,editId:null,loading:!1,data:[],search:null}},computed:{searchParam:function(){return{search:this.search,pageNo:this.pageNo,pageSize:this.pageSize}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,Object(l["e"])(this.searchParam).then((function(t){e.loading=!1,e.data=t.data}))},currentChange:function(){this.initData()},sizeChange:function(){this.initData()},del:function(e){var t=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])(e).then((function(e){t.$message({type:"success",message:"删除成功"}),t.initData()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleConfirm:function(){this.initData()},add:function(){this.editId=null,this.editShow=!0},edit:function(e){this.editId=e,this.editShow=!0}}},C=x,j=Object(m["a"])(C,a,i,!1,null,"1b99e979",null);t["default"]=j.exports},"77a4":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var a=n("b775"),i=function(e){return Object(a["a"])({url:"/sys/permission/tree",method:"get",data:e})},o=function(e){var t=e.id,n=e.data;return Object(a["a"])({url:"/sys/permission/".concat(t),method:"post",data:n})},r=function(e){var t=e.data;return Object(a["a"])({url:"/sys/permission",method:"post",data:t})},l=function(e){return Object(a["a"])({url:"/sys/permission/"+e,method:"get"})},s=function(e){return Object(a["a"])({url:"/sys/permission/findByName",method:"get",params:{name:e}})},c=function(e){return Object(a["a"])({url:"/sys/permission/"+e,method:"delete"})}},"8d41":function(e,t,n){}}]);
//# sourceMappingURL=chunk-11a3f49d.c0ffa5ee.js.map