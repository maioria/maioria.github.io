(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-400d30fe"],{"23c0":function(e,t,n){"use strict";var a=n("ad44"),i=n.n(a);i.a},3323:function(e,t,n){"use strict";n("a9e3");t["a"]={props:{id:{require:!0,type:Number},show:{require:!0,type:Boolean}},computed:{showVal:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}}}}},6018:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n("b775"),i=function(e){return Object(a["a"])({url:"/sys/dep/tree",method:"get",params:e})},r=function(e){return Object(a["a"])({url:"/sys/dep/"+e,method:"get"})},o=function(e){return Object(a["a"])({url:"/sys/dep",method:"post",data:e})},s=function(e){return Object(a["a"])({url:"/sys/dep/"+e.id,method:"post",data:e})},c=function(e){return Object(a["a"])({url:"/sys/dep/"+e,method:"delete"})},l=function(e){return Object(a["a"])({url:"/sys/dep/"+e+"/status/0",method:"post"})},d=function(e){return Object(a["a"])({url:"/sys/dep/"+e+"/status/1",method:"post"})}},6724:function(e,t,n){"use strict";n("8d41");var a="@@wavesContext";function i(e,t){function n(n){var a=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},a),r=i.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var o=r.getBoundingClientRect(),s=r.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",r.appendChild(s)),i.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(n.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(n.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[a]?e[a].removeHandle=n:e[a]={removeHandle:n},n}var r={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[a].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[a].removeHandle,!1),e[a]=null,delete e[a]}},o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t["a"]=r},"8d41":function(e,t,n){},ad44:function(e,t,n){},d14e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"table-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.initData}},[e._v(" 查询 ")]),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.add}},[e._v(" 新增 ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,border:"",fit:"","default-expand-all":"","row-key":"id","highlight-current-row":"","tree-props":{children:"children"}}},[n("el-table-column",{attrs:{label:"编号",width:"120",prop:"id"}}),n("el-table-column",{attrs:{label:"名称",prop:"name"}}),n("el-table-column",{attrs:{label:"上级部门",prop:"parentName"}}),n("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"160"}}),n("el-table-column",{attrs:{label:"状态",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("statusName")(t.row.status)))])]}}])}),n("el-table-column",{attrs:{"header-align":"center",align:"center",width:"125","class-name":"operate-group",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.edit(t.row.id)}}}),"DISABLED"===t.row.status?n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check",size:"mini"},on:{click:function(n){return e.active(t.row.id)}}}):e._e(),"NORMAL"===t.row.status?n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close",size:"mini"},on:{click:function(n){return e.disabled(t.row.id)}}}):e._e()],1)]}}])})],1),n("Edit",{attrs:{id:e.editId,show:e.editShow},on:{"update:show":function(t){e.editShow=t},confirm:e.handleEditConfirm}})],1)])},i=[],r=(n("ac1f"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"部门",visible:e.showVal,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showVal=t},closed:e.closed,open:e.handleOpen}},[n("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"父部门",prop:"parentId"}},[n("department-input",{ref:"departmentInputRef",model:{value:e.data.parentId,callback:function(t){e.$set(e.data,"parentId",t)},expression:"data.parentId"}})],1),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),n("el-button",{on:{click:e.cancel}},[e._v("关闭")])],1)],1)}),o=[],s=(n("b0c0"),n("e181")),c=n("3323"),l=n("6018"),d={name:"Edit",components:{DepartmentInput:s["a"]},mixins:[c["a"]],props:{},data:function(){return{loading:!1,data:{parentId:null,name:null},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:20,message:"长度在2-20个字符",trigger:"blur"}]}}},computed:{submitData:{get:function(){var e=this.data;return e.id=this.id,e}}},methods:{submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0,e.submitData.id?Object(l["g"])(e.submitData).then(e.success):Object(l["e"])(e.submitData).then(e.success)}))},success:function(e){this.loading=!1,this.$message("提交成功"),this.showVal=!1,this.reset(),this.confirm(e.data)},confirm:function(e){this.$emit("confirm",e)},init:function(){var e=this;this.loading=!0,Object(l["d"])(this.id).then((function(t){e.loading=!1,e.data.name=t.data.name,e.data.parentId=t.data.parentId,e.data.parentId&&e.setParentDepartmentVal(e.data.parentId)}))},cancel:function(){this.showVal=!1},reset:function(){this.$refs.form.resetFields()},handleOpen:function(){this.id&&this.init()},setParentDepartmentVal:function(e){this.$refs.departmentInputRef.setValue(e)},closed:function(){this.reset(),this.setParentDepartmentVal(null)}}},u=d,p=n("2877"),h=Object(p["a"])(u,r,o,!1,null,"0601f8c9",null),f=h.exports,m=n("6724"),b={name:"List",components:{Edit:f},directives:{waves:m["a"]},data:function(){return{editShow:!1,editId:null,loading:!1,data:[],search:null}},computed:{searchParam:function(){return{search:this.search}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,Object(l["f"])(this.searchParam).then((function(t){e.loading=!1,e.data=t.data}))},del:function(e){var t=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])(e).then((function(e){e.data?(t.$message.success("删除成功"),t.initData()):(console.error(e),t.$message.error("删除失败"))}))})).catch((function(){}))},add:function(){this.editId=null,this.editShow=!0},edit:function(e){this.editId=e,this.editShow=!0},handleEditConfirm:function(){this.initData()},disabled:function(e){var t=this;this.$confirm("确定要冻结此部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(e).then((function(e){e.data?(t.$message.success("冻结成功"),t.initData()):(console.error(e),t.$message.error("冻结失败"))}))})).catch((function(){}))},active:function(e){var t=this;this.$confirm("确定要激活此部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])(e).then((function(e){e.data?(t.$message.success("激活成功"),t.initData()):(console.error(e),t.$message.error("激活失败"))}))})).catch((function(){}))}}},v=b,w=(n("23c0"),Object(p["a"])(v,a,i,!1,null,"081c21e2",null));t["default"]=w.exports},e181:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom",trigger:"focus",width:"200"},on:{show:e.handleShow},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[n("div",[n("department-tree",{ref:"departmentTree",on:{"node-click":e.nodeClick}})],1),n("el-input",{attrs:{slot:"reference",readonly:!0},slot:"reference",model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}})],1)},i=[],r=(n("b0c0"),n("a9e3"),n("f024")),o=n("6018"),s={name:"DepartmentInput",components:{DepartmentTree:r["a"]},props:{value:{default:null,require:!0,type:Number}},data:function(){return{department:null,popoverShow:!1}},computed:{departmentVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},departmentName:function(){return this.department&&this.department.name}},methods:{nodeClick:function(e){this.department=e,this.departmentVal=this.department&&this.department.id,this.popoverShow=!1},handleShow:function(){this.$refs.departmentTree.initData()},setValue:function(e){var t=this;e?Object(o["d"])(e).then((function(e){t.department=e.data})):(this.department=null,this.departmentVal=null)}}},c=s,l=n("2877"),d=Object(l["a"])(c,a,i,!1,null,"4dc91a75",null);t["a"]=d.exports},f024:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tree",{ref:"departmentTree",attrs:{data:e.data,"default-expand-all":!0,"node-key":"id","show-checkbox":e.showCheckbox,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick,"check-change":e.handleCheckChange,check:e.handleCheck}})},i=[],r=n("6018"),o={name:"DepartmentTree",props:{showCheckbox:{default:!1,type:Boolean}},data:function(){return{data:[],defaultProps:{children:"children",label:"name"}}},mounted:function(){this.initData()},methods:{setCheckedKeys:function(e,t){this.$refs.departmentTree.setCheckedKeys(e,t)},setCurrentKey:function(e){this.$refs.departmentTree.setCurrentKey(e)},initData:function(){var e=this;Object(r["f"])().then((function(t){e.data=t.data}))},handleNodeClick:function(e){this.$emit("node-click",e)},handleCheckChange:function(e,t,n){this.$emit("check-change",e,t,n)},handleCheck:function(e,t){this.$emit("check",e,t)}}},s=o,c=n("2877"),l=Object(c["a"])(s,a,i,!1,null,"4fef9c60",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-400d30fe.bcf1f137.js.map